# peixun
å—æµ·é²¨è§†è§‰ç»„ç¬¬ä¸‰æ¬¡åŸ¹è®­
-----

# ğŸ¦ˆ Robomaster å—æµ·é²¨æˆ˜é˜Ÿ - è§†è§‰ç»„æ‹›æ–°åŸ¹è®­ (Week 3)

æ¬¢è¿æ¥åˆ° Robomaster ç®—æ³•ç»„ç¬¬ä¸‰å‘¨åŸ¹è®­ä»£ç ä»“åº“ï¼ğŸ‘‹

æœ¬ä»“åº“åŒ…å«äº† **CMake åŸºç¡€æ„å»º** ä¸ **ROS 2 é€šä¿¡æœºåˆ¶** çš„æ‰€æœ‰æ•™å­¦ç¤ºä¾‹ä»£ç ã€‚é€šè¿‡æœ¬å‘¨çš„å­¦ä¹ ï¼Œä½ å°†æŒæ¡ä»é›¶æ„å»º C++ é¡¹ç›®ï¼Œä»¥åŠä½¿ç”¨ ROS 2 å®ç°èŠ‚ç‚¹é—´â€œè¯é¢˜é€šä¿¡â€çš„æ ¸å¿ƒæŠ€èƒ½ã€‚

## ğŸ“… åŸ¹è®­å†…å®¹æ¦‚è§ˆ

æœ¬å‘¨åŸ¹è®­ä¸»è¦æ¶µç›–ä»¥ä¸‹æ¨¡å—ï¼š

1.  **CMake æ„å»ºåŸºçŸ³**ï¼šç†è§£ `CMakeLists.txt` ç¼–å†™è§„åˆ™ï¼Œè„±ç¦» IDE æ‰‹åŠ¨æ„å»º C++ ç¨‹åºã€‚
2.  **ROS 2 åŸºç¡€æ¶æ„**ï¼šå·¥ä½œç©ºé—´ (`Workspace`)ã€åŠŸèƒ½åŒ… (`Package`)ã€èŠ‚ç‚¹ (`Node`) çš„æ¦‚å¿µä¸åˆ›å»ºã€‚
3.  **è¯é¢˜é€šä¿¡ (Topics)**ï¼š
      * åŸºäº C++ çš„å‘å¸ƒè€… (`Publisher`) ä¸è®¢é˜…è€… (`Subscriber`) å®ç°ã€‚
      * å®šæ—¶å™¨ (`Timer`) ä¸å›è°ƒå‡½æ•° (`Callback`) çš„ä½¿ç”¨ã€‚
4.  **è‡ªå®šä¹‰æ¥å£ (Interfaces)**ï¼š
      * ä»é›¶å®šä¹‰ `.msg` æ–‡ä»¶ã€‚
      * é…ç½®ä¾èµ–å¹¶ç”Ÿæˆ C++/Python å¤´æ–‡ä»¶ã€‚
      * å®ç°ç»“æ„åŒ–æ•°æ®çš„ä¼ è¾“ï¼ˆç³»ç»ŸçŠ¶æ€/è‡ªç„ä¿¡æ¯ï¼‰ã€‚
5.  **Python éªŒè¯**ï¼šä½¿ç”¨ Python å¿«é€Ÿç¼–å†™æµ‹è¯•èŠ‚ç‚¹éªŒè¯è‡ªå®šä¹‰æ¥å£ã€‚

## ğŸ“‚ ä»£ç ç›®å½•ç»“æ„

```text
rm_training_week3/
â”œâ”€â”€ chapt1/                     # [Part 1] CMake åŸºç¡€ (Hello World)
â”‚
â”œâ”€â”€ chapt2/                     # [Part 2] ROS 2 èŠ‚ç‚¹ä¸åŠŸèƒ½åŒ…
â”‚   â”œâ”€â”€ node_cmake/             # æ‰‹åŠ¨åˆ›å»ºåŠŸèƒ½åŒ…ç¤ºä¾‹
â”‚   â””â”€â”€ node_ros2/              # æ ‡å‡† ROS 2 èŠ‚ç‚¹é¡¹ç›®
â”‚       â””â”€â”€ src/node_ros2       # -> èŠ‚ç‚¹æºç 
â”‚
â”œâ”€â”€ chapt3/                     # [Part 3] è¯é¢˜é€šä¿¡ä¸æ¥å£å®æˆ˜
â”‚   â”œâ”€â”€ msg_interface/          # è‡ªå®šä¹‰æ¶ˆæ¯æ¥å£å·¥ä½œç©ºé—´
â”‚   â”‚   â””â”€â”€ src/self_interface  # -> æ¶ˆæ¯å®šä¹‰åŒ… (SystemStatus.msg)
â”‚   â”œâ”€â”€ sys_pub/                # å‘å¸ƒè€…å·¥ä½œç©ºé—´
â”‚   â”‚   â””â”€â”€ src/sys_pub         # -> å‘å¸ƒè€…èŠ‚ç‚¹æºç 
â”‚   â”œâ”€â”€ sys_sub/                # è®¢é˜…è€…å·¥ä½œç©ºé—´
â”‚   â”‚   â””â”€â”€ src/sys_sub         # -> è®¢é˜…è€…èŠ‚ç‚¹æºç 
â”‚   â””â”€â”€ turtle_cmd/             # æµ·é¾Ÿæ§åˆ¶å·¥ä½œç©ºé—´
â”‚       â””â”€â”€ src/turtle_cmd      # -> æµ·é¾Ÿç”»åœ†/æ–¹æºç 
â”‚
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1\. ç¯å¢ƒè¦æ±‚

  * **Ubuntu** 22.04 / 20.04
  * **ROS 2** (Humble / Galactic / Foxy)
  * **Python** 3.8+
  * **ä¾èµ–åº“**ï¼š`psutil` (ç”¨äºç³»ç»ŸçŠ¶æ€è·å–ç¤ºä¾‹)
    ```bash
    sudo apt install python3-psutil
    # æˆ–è€… pip install psutil
    ```

### 2\. ç¼–è¯‘ä»£ç 

ç”±äºæœ¬ä»“åº“ä»£ç æŒ‰ç« èŠ‚åˆ†æ•£åœ¨ä¸åŒæ–‡ä»¶å¤¹ä¸­ï¼Œ**è¯·è¿›å…¥å¯¹åº”çš„æ–‡ä»¶å¤¹è¿›è¡Œç¼–è¯‘**ã€‚

**ä»¥ Chapter 3 (è¯é¢˜é€šä¿¡) ä¸ºä¾‹ï¼š**

å› ä¸ºå‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½ä¾èµ–è‡ªå®šä¹‰æ¶ˆæ¯ï¼Œ**å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹é¡ºåºç¼–è¯‘**ï¼š

```bash
# 1. é¦–å…ˆç¼–è¯‘è‡ªå®šä¹‰æ¥å£ (å¿…é¡»æ­¥éª¤)
cd chapt3/msg_interface
colcon build
source install/setup.bash

# 2. ç„¶åç¼–è¯‘å‘å¸ƒè€…
cd ../sys_pub
colcon build
# æ³¨æ„ï¼šéœ€è¦å¼•å…¥åˆšæ‰ç¼–è¯‘å¥½çš„æ¥å£ç¯å¢ƒ
source ../msg_interface/install/setup.bash 
source install/setup.bash

# 3. æœ€åç¼–è¯‘è®¢é˜…è€… (å¯é€‰)
cd ../sys_sub
colcon build
source ../msg_interface/install/setup.bash
source install/setup.bash
```

### 3\. è¿è¡Œç¤ºä¾‹

**ç¤ºä¾‹ Aï¼šè¿è¡Œè¯é¢˜é€šä¿¡ (C++)**

```bash
# ç»ˆç«¯ 1: å¯åŠ¨å‘å¸ƒè€…
# (ç¡®ä¿å·²åœ¨ sys_pub ç›®å½•ä¸‹å¹¶ source äº†ç¯å¢ƒ)
ros2 run sys_pub sys_pub_py

# ç»ˆç«¯ 2: å¯åŠ¨è®¢é˜…è€…
# (ç¡®ä¿å·²åœ¨ sys_sub ç›®å½•ä¸‹å¹¶ source äº†ç¯å¢ƒ)
ros2 run sys_sub sys_sub
```

**ç¤ºä¾‹ Bï¼šéªŒè¯è‡ªå®šä¹‰æ¶ˆæ¯ (Python)**

```bash
# å¯åŠ¨ç³»ç»ŸçŠ¶æ€å‘å¸ƒè€…
ros2 run sys_pub sys_pub_py

# éªŒè¯æ•°æ®
ros2 topic echo /sys_status
```

## ğŸ“ å¸¸ç”¨æŒ‡ä»¤é€ŸæŸ¥è¡¨ (Cheatsheet)

  * **åˆ›å»ºåŠŸèƒ½åŒ… (C++)**:
    ```bash
    ros2 pkg create --build-type ament_cmake <pkg_name> --dependencies rclcpp std_msgs
    ```
  * **æŸ¥çœ‹è¯é¢˜åˆ—è¡¨**: `ros2 topic list`
  * **æŸ¥çœ‹è¯é¢˜é¢‘ç‡**: `ros2 topic hz /topic_name`
  * **æŸ¥çœ‹æ¥å£å®šä¹‰**: `ros2 interface show <pkg_name>/msg/<MsgName>`
  * **æŸ¥çœ‹èŠ‚ç‚¹å…³ç³»å›¾**: `rqt_graph`


## ğŸ”— å‚è€ƒèµ„æ–™

  * [ROS 2 å®˜æ–¹æ–‡æ¡£](https://docs.ros.org/)
  * [é±¼é¦™ ROS ç¤¾åŒº](https://fishros.org.cn/)
  * [CMake å®˜æ–¹æ•™ç¨‹](https://cmake.org/cmake/help/latest/guide/tutorial/index.html)

-----

*Happy Coding\! ğŸ¤–*
*Robomaster Algorithm Group*
